
<% if( typeof title == 'string' && title){ title = title } else{ title="" } %>
<% include ../../../masterpage/loader %>

<script src="../../../../<%= js_css_version %>/javascripts/class-category-general-speciality.js"></script>	
<script src="../../../../<%= js_css_version %>/javascripts/class-bussiness.js"></script>	


<div id="page_wrap" class="page_wrap">
<div id="layout" class="page_width layout">
<div id="content-wrap" class="content_wrap">
<!-- --------------------
page wrap 
--------------------- -->
<% include ../../../masterpage/header %>


<% 
if(users_type == "admin"){
	var status_disebale = ' style="display:none;" ';
}else{
	var status_disebale = "";
}
%>



<!-- --------------------
content
--------------------- -->
<div id="content" class="content">

	<h1><a href="/stores/manage/<%= store_id %>/<%= user_id %>"><%= store_name %></a><i class="fas fa-chevron-right"></i>Danh mục</h1>

	<div class="sap_xep_loc">
		<div class="sap_xep_wrap">
			<a href="/categorys/general/<%= service_type_name %>/add/<%= store_id %>/<%= user_id %>" class="btn_green">Thêm danh mục</a>
		</div>
		<div class="loc_wrap">
			<select id="loc_trang_thai">
				<option id="all" value="[0,1,2,3]">Tất cả trạng thái</option>
				<option id="checking" value="[0]">Chờ duyệt</option>
				<option id="edit" value="[2]">Đã sửa chờ duyệt</option>
				<option id="refuse" value="[3]">Bị từ chối</option>
				<option id="checked" value="[1]">Đã duyệt</option>
			</select>
		</div>
	</div>
	<div id="ajax-wrap">	
	<% include ../../../masterpage/widget-category-general-show-tables %>
	</div>
	



<input type="hidden" id="user_id" value="<%= user_id %>"/>
<input type="hidden" id="store_id" value="<%= store_id %>"/>



</div>
<!-- --------------------
end content
--------------------- -->





<% include ../../../masterpage/footer %>

</div><!-- //content_wrap -->	


<% include ../../../masterpage/sidebar %>

<!-- --------------------
//end of page wrap 
--------------------- -->
</div><!-- //layout -->	
</div><!-- //pagewrap -->





<script>
$(document).ready(function($){
/////////////////////////////////////////////////////	
	//
	//@
	//xoa
	$(document).on('click','.submitdelete',function(e) {	
		//@
		e.preventDefault();		
		let cat_id = $(this).attr("data_cat_id");
		//
		//@
		let x = "xác nhận xoá";		
		let y = "delete_category_general_speciality";//function name in callback 
		let z = ' { "cat_id" : "' + cat_id + '" }';
		ojs_message.message_yes_no_show(x,y,z);		
		//@
	});			
	//		
	
	//
	//@
	//add class active
	$(document).on('click','.btn_add_store',function(e) {	
		e.preventDefault();
		$('.store_row').find('.btn_add_store').removeClass('active');
		$(this).addClass('active');
	});//end of function	
	//@
	//@	
	
	
	$("#loc_trang_thai").change(function() {
		let user_id = $('#user_id').val();
		let store_id = $('#store_id').val();
		let status_admin = $('#loc_trang_thai').val();
		
		var datas = {
			"datas":{
				user_id 	: user_id,
				store_id	:store_id,
				status_admin : status_admin
			}
		}	
		//console.log(datas);
		//return;
		ojs_bussiness.ajax_load_category_no(datas);	
	});
	
	/*
	
	//@
	//goi ajax
	$(document).on('click','#all',function(e) {	
		e.preventDefault();
		//@
		//@
		let user_id = $('#user_id').val();
		let store_id = $('#store_id').val();
		let status_admin = [0,1,2,3];
		
		var datas = {
			"datas":{
				status_admin : status_admin,
				store_id:store_id
			}
		}	
		//console.log(datas);
		//return;
		ojs_bussiness.ajax_load_category(datas);	

	});//end of function		
	
	//@
	//goi ajax
	$(document).on('click','#complate',function(e) {	
		e.preventDefault();
		//@
		//@
		let user_id = $('#user_id').val();
		let store_id = $('#store_id').val();
		let status_admin = [1]
		
		var datas = {
			"datas":{
				store_id:store_id,
				status_admin : status_admin
			}
		}	
		//console.log(datas);
		//return;
		ojs_bussiness.ajax_load_category_no(datas);	

	});//end of function

	//@
	//goi ajax
	$(document).on('click','#new',function(e) {	
		e.preventDefault();
		//@
		//@
		let user_id = $('#user_id').val();
		let store_id = $('#store_id').val();
		let status_admin = [0]
		
		var datas = {
			"datas":{
				store_id:store_id,
				status_admin : status_admin
			}
		}	
		//console.log(datas);
		//return;
		ojs_bussiness.ajax_load_category_no(datas);	

	});//end of function

	//@
	//goi ajax
	$(document).on('click','#update',function(e) {	
		e.preventDefault();
		//@
		//@
		let user_id = $('#user_id').val();
		let store_id = $('#store_id').val();
		let status_admin = [2]
		
		var datas = {
			"datas":{
				store_id:store_id,
				status_admin : status_admin
			}
		}	
		console.log(datas);
		return;
		ojs_bussiness.ajax_load_category_no(datas);	

	});//end of function


	//@
	//goi ajax
	$(document).on('click','#not',function(e) {	
		e.preventDefault();
		//@
		//@
		let user_id = $('#user_id').val();
		let store_id = $('#store_id').val();
		let status_admin = [3]
		
		var datas = {
			"datas":{
				store_id:store_id,
				status_admin : status_admin
			}
		}	
		//console.log(datas);
		//return;
		ojs_bussiness.ajax_load_category_no(datas);	

	});//end of function

	//@
	//goi ajax
	$(document).on('change','#trang_thai',function(e) {	
		e.preventDefault();
		let x = $('#trang_thai').val();
		let store_id = $('#store_id').val();
		//@
		//@
		//@//neu chon trang thai la tat ca
		if(x == "all"){
			var status_admin = [0,1,2,3,4];
			var datas = {
				"datas":{
					status_admin : status_admin,
					store_id:store_id
				}
			}	
			//console.log(datas);
			//return;
			ojs_bussiness.ajax_load_category(datas);				
		}else{//cac trang thai khac
			var status_admin = JSON.parse(x);
			var datas = {
				"datas":{
					status_admin : status_admin,
					store_id:store_id
				}
			}	
			console.log(datas);
			return;		
			ojs_bussiness.ajax_load_category_no(datas);				
		}

	});//end of function

	*/
	
	//	
	//
///////////////////////////////////////////////////////
});//end of document
</script>








<% include ../../../masterpage/loader-end %>